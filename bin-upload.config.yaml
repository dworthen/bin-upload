binaries:
  # binaryId -> path to binary file
  linux-x64: "./bin/linux-x64/bin-upload"
  linux-x64-musl: "./bin/linux-x64-musl/bin-upload"
  linux-arm64: "./bin/linux-arm64/bin-upload"
  linux-arm64-musl: "./bin/linux-arm64-musl/bin-upload"
  win-x64: "./bin/win-x64/bin-upload.exe"
  win-arm64: "./bin/win-arm64/bin-upload.exe"
  darwin-x64: "./bin/darwin-x64/bin-upload"
  darwin-arm64: "./bin/darwin-arm64/bin-upload"
pack:
  prePackCommand: "bun run build"
  dir: "./.bin-upload"
npm:
  # readme and license files to include in the npm packages.
  readmeFile: "README.md"
  licenseFile: "LICENSE"
  packageJson:
    # packageJson values
    # https://docs.npmjs.com/cli/v11/configuring-npm/package-json
    # The name is the name of the primary npm package users install.
    name: "@d-dev/bin-upload"
    version: <%= vars.gitTag %>
    description: "Publish binaries to npm, pypi, and github releases."
    author: "Derek Worthen <worthend.derek@gmail.com>"
    license: "MIT"
    repository: "github:dworthen/bin-upload"
    homepage: "https://dworthen.github.io/bin-upload"
    keywords:
      - "bin-upload"
      - "binary"
      - "npm"
      - "pypi"
      - "github"
      - "publish"
  binaryPackages:
    # A subset of binaryIds that should be published as separate packages on npm.
    # binaryId -> { name, os, arch }
    # as defined by node's process.platform and process.arch
    # https://nodejs.org/docs/latest-v24.x/api/process.html#processplatform
    # https://nodejs.org/docs/latest-v24.x/api/process.html#processarch
    # Note: It is not possible to publish musl linux binaries to
    # NPM since you cannot identify binaries using musl with platform/arch.
    linux-x64:
      name: "@d-dev/bin-upload-linux-x64"
      os: "linux"
      arch: "x64"
    linux-arm64:
      name: "@d-dev/bin-upload-linux-arm64"
      os: "linux"
      arch: "arm64"
    win-x64:
      name: "@d-dev/bin-upload-win-x64"
      os: "win32"
      arch: "x64"
    win-arm64:
      name: "@d-dev/bin-upload-win-arm64"
      os: "win32"
      arch: "arm64"
    darwin-x64:
      name: "@d-dev/bin-upload-darwin-x64"
      os: "darwin"
      arch: "x64"
    darwin-arm64:
      name: "@d-dev/bin-upload-darwin-arm64"
      os: "darwin"
      arch: "arm64"
  publish:
    # Arguments to pass to `npm publish`
    # https://docs.npmjs.com/cli/v11/commands/npm-publish
    access: "public"
    tag: "latest"
    # Publishing with granular access token
    # Not needed if publishing from a trusted publisher
    # such as GitHub actions.
    # https://docs.npmjs.com/trusted-publishers
    # "registry=https://registry.npmjs.org/": true
    # "//registry.npmjs.org/:_authToken=<%= env.NPM_TOKEN %>": true
    # may also set with CLI args e.g.,
    # bin-upload publish -s "npm.publish.registry\=https://registry\.npmjs\.org/" -s "npm.publish.//registry\.npmjs\.org/:_authToken\=some-token"
pypi:
  # readme file to include in the pypi package.
  readmeFile: "README.md"
  platformTags:
    # A subset of binaryIds that should be published to pypi.
    # binaryId: pypi platform tag
    # The pypi platform tag must be a valid wheel platform tag.
    # https://packaging.python.org/en/latest/specifications/platform-compatibility-tags/
    linux-x64: "manylinux_2_17_x86_64"
    linux-x64-musl: "musllinux_1_2_x86_64"
    linux-arm64: "manylinux_2_17_aarch64"
    linux-arm64-musl: "musllinux_1_2_aarch64"
    win-x64: "win_amd64"
    win-arm64: "win_arm64"
    darwin-x64: "macosx_10_9_x86_64"
    darwin-arm64: "macosx_11_0_arm64"
  metadata:
    # Metadata fields for the pypi package.
    # https://packaging.python.org/en/latest/specifications/core-metadata/
    Name: "bin-upload"
    Version: <%= vars.gitTag %>
    Summary: "Publish binaries to npm, pypi, and github releases."
    Author: "Derek Worthen"
    Author-Email: "worthend.derek@gmail.com"
    License-Expression: "MIT"
    Requires-Python: ">=3.11"
    Project-URL: source, https://github.com/dworthen/bin-upload
    Project-URL: homepage, https://dworthen.github.io/bin-upload
    keywords: "bin-upload,binary,pypi,npm,github,publish"
  # publish:
  #   # Arguments to pass to `uv publish`
  #   # https://docs.astral.sh/uv/guides/package/
  #   # Token not needed if publishing from a trusted publisher such as GitHub actions.
  #   # https://docs.pypi.org/trusted-publishers/adding-a-publisher/
  #   token: "<%= env.PYPI_TOKEN %>"
  #   # may aslo set with CLI args e.g.,
  #   # bin-upload publish -s "pypi.publish.token=some-token"
github:
  owner: "dworthen"
  repo: "bin-upload"
  token: "<%= env.GITHUB_TOKEN %>"
  release:
    # Arguments to pass to gh release api
    # https://docs.github.com/en/rest/releases/releases?apiVersion=2022-11-28#create-a-release
    # if !name -> use tag_name
    # if !body -> use commit message of associated tag
    # may also set with CLI args e.g.,
    # bin-upload publish -s "github.release.tag_name=v1.0.0" -s "github.release.body=Some description" ...
    tag_name: "v<%= vars.gitTag %>"
    # name: "v1.0.0"
    # body: "Release v1.0.0"
    # draft: true
  archives:
    # binaryId: archive format ("tar.gz" or "zip")
    linux-x64: "tar.gz"
    linux-x64-musl: "tar.gz"
    linux-arm64: "tar.gz"
    linux-arm64-musl: "tar.gz"
    win-x64: "zip"
    win-arm64: "zip"
    darwin-x64: "tar.gz"
    darwin-arm64: "tar.gz"
    # Example of more control of creating archives
    # source:
    #   format: "tar.gz"
    #   files:
    #     # Place all the files in src directly in the root of the archive.
    #     - cwd: "src"
    #       pattern: "**/*"
    #     # Place all the files in scripts in archive keeping the scripts directory.
    #     - cwd: "."
    #       pattern: "scripts/**/*"
    #     - "README.md"
    #     - "LICENSE"
